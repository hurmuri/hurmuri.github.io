window.__require=function t(e,o,n){function r(s,c){if(!o[s]){if(!e[s]){var u=s.split("/");if(u=u[u.length-1],!e[u]){var l="function"==typeof __require&&__require;if(!c&&l)return l(u,!0);if(i)return i(u,!0);throw new Error("Cannot find module '"+s+"'")}s=u}var m=o[s]={exports:{}};e[s][0].call(m.exports,function(t){return r(e[s][1][t]||t)},m,m.exports,t,e,o,n)}return o[s].exports}for(var i="function"==typeof __require&&__require,s=0;s<n.length;s++)r(n[s]);return r}({BoxMgr:[function(t,e,o){"use strict";cc._RF.push(e,"f1b53vYuctL5rpn90xwac1/","BoxMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./NodeMgr"),r=cc._decorator,i=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeParent=null,e.prefabBox=null,e.mMaxY=0,e.mMemMinY=0,e.mStartY=200,e.mNewBoxs=[],e.mMemBoxs=[],e.mMaxOffset=3,e.mCurrOffset=0,e.mMaxZIndex=1e4,e.mCurrZIndex=0,e.mIntervalX=0,e.mIntervalY=0,e.mStandBox=null,e.mIsNew=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this.mMaxY=3*cc.winSize.height+this.prefabBox.data.height/2,this.mMemMinY=2*cc.winSize.height-this.prefabBox.data.height/2,this.mIntervalX=.5*this.prefabBox.data.width,this.mIntervalY=.5*this.prefabBox.data.height},e.prototype.start=function(){},e.prototype.getBox=function(){var t=n.default.getBox();return null==t&&(t=cc.instantiate(this.prefabBox)),t},e.prototype.putBox=function(t){null!=t&&n.default.putBox(t)},e.prototype.clearAll=function(){if(null!=this.mMemBoxs){for(var t=0;t<this.mMemBoxs.length;t++)this.putBox(this.mMemBoxs[t]);this.mMemBoxs=[]}if(null!=this.mNewBoxs){for(t=0;t<this.mNewBoxs.length;t++)this.putBox(this.mNewBoxs[t]);this.mNewBoxs=[]}},e.prototype.reloadAll=function(){for(var t=0;t<this.mNewBoxs.length;t++)this.putBox(this.mNewBoxs[t]);if(this.mNewBoxs=[],this.mCurrZIndex=this.mMaxZIndex,this.mMemBoxs.length<=0)this.mIsNew=!0,this.mCurrOffset=0,this.reloadNew(this.mStartY);else{this.mIsNew=!1;for(t=0;t<this.mMemBoxs.length;)this.mMemBoxs[t].y-=2*cc.winSize.height,this.mMemBoxs[t].zIndex=this.mCurrZIndex,this.mMemBoxs[t].getComponent("Box").setNum(this.mCurrZIndex),this.mCurrZIndex--,this.mNewBoxs.push(this.mMemBoxs[t]),t++;var e=this.mMemBoxs[this.mMemBoxs.length-1];this.mMemBoxs=[],this.mCurrOffset=e.getComponent("Box").getOffset(),cc.log("CurrOffset",this.mCurrOffset),this.reloadNew(e.y)}},e.prototype.reloadNew=function(t){for(var e=t+this.mIntervalY;e<this.mMaxY;){var o=this.getBox();null==this.mStandBox&&(this.mStandBox=o);var n=this.getRandom();this.mIsNew||(this.mCurrOffset+n>this.mMaxOffset?this.mCurrOffset-=n:this.mCurrOffset+n<-this.mMaxOffset?this.mCurrOffset-=n:this.mCurrOffset+=n),this.mIsNew=!1;var r=o.getComponent("Box");o.x=this.mCurrOffset*this.mIntervalX,o.y=e,o.zIndex=this.mCurrZIndex,r.setNum(this.mCurrZIndex),this.mCurrZIndex--,o.parent=this.nodeParent,e>=this.mMemMinY?(this.mMemBoxs.length>0?(this.mMemBoxs[this.mMemBoxs.length-1].getComponent("Box").setNext(o),r.setPrev(this.mMemBoxs[this.mMemBoxs.length-1])):(this.mNewBoxs[this.mNewBoxs.length-1].getComponent("Box").setNext(o),r.setPrev(this.mNewBoxs[this.mNewBoxs.length-1])),this.mMemBoxs.push(o)):(this.mNewBoxs.length>0?(this.mNewBoxs[this.mNewBoxs.length-1].getComponent("Box").setNext(o),r.setPrev(this.mNewBoxs[this.mNewBoxs.length-1])):r.setPrev(null),this.mNewBoxs.push(o)),e+=this.mIntervalY}},e.prototype.getRandom=function(){return Math.random()<.5?-1:1},e.prototype.getIntervalX=function(){return this.mIntervalX},e.prototype.getIntervalY=function(){return this.mIntervalY},e.prototype.getStandBox=function(){return this.mStandBox},__decorate([s(cc.Node)],e.prototype,"nodeParent",void 0),__decorate([s(cc.Prefab)],e.prototype,"prefabBox",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./NodeMgr":"NodeMgr"}],Box:[function(t,e,o){"use strict";cc._RF.push(e,"53f0cM/GI9DtJvW8jj3qJ60","Box"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./NodeMgr"),r=cc._decorator,i=r.ccclass,s=r.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.txtNum=null,e.mPrevBox=null,e.mNextBox=null,e.mOffset=0,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.setOffset=function(t){this.mOffset=t},e.prototype.getOffset=function(){return this.mOffset},e.prototype.setPrev=function(t){this.mPrevBox=t},e.prototype.getPrev=function(){return this.mPrevBox},e.prototype.setNext=function(t){this.mNextBox=t},e.prototype.getNext=function(){return this.mNextBox},e.prototype.setNum=function(t){this.txtNum.string=""+t},e.prototype.down=function(t){var e=this;this.node.runAction(cc.sequence(cc.moveBy(.4,0,t),cc.callFunc(function(){n.default.putBox(e.node)})))},__decorate([s(cc.Label)],e.prototype,"txtNum",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{"./NodeMgr":"NodeMgr"}],Game:[function(t,e,o){"use strict";cc._RF.push(e,"3ba919A7E9BlK3d9bH+xivU","Game"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.nodeBg=null,e.nodeRobot=null,e.nodeEnd=null,e.txtPoints=null,e.mIsPlaying=!1,e.mPoints=0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this;this.node.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation(),t.onTouchCallback(e)}),this.mPoints=0},e.prototype.start=function(){var t=this;this.reloadBoxs();var e=this.nodeRobot.getComponent("Robot");e.setAddCallback(function(){t.onAddPoints()}),e.setFailedCallback(function(){t.onGameEnd()}),this.mIsPlaying=!0},e.prototype.onAddPoints=function(){this.mPoints++},e.prototype.onGameEnd=function(){this.mIsPlaying=!1,this.txtPoints.string="\u5f97\u5206\uff1a"+this.mPoints,this.nodeEnd.active=!0},e.prototype.reloadBoxs=function(){var t=this.getComponent("BoxMgr");t.reloadAll();var e=this.nodeRobot.getComponent("Robot");if(null==e.getCurrent()){var o=t.getStandBox(),n=o.getComponent("Box").getNext();e.setCurrent(o),e.setNext(n),n.x>o.x?e.turnRight():e.turnLeft()}else e.setCurrent(e.getCurrent())},e.prototype.robotJumpLeft=function(){var t=this.nodeRobot.getComponent("Robot");t.turnLeft(),t.jump()},e.prototype.robotJumpRight=function(){var t=this.nodeRobot.getComponent("Robot");t.turnRight(),t.jump()},e.prototype.bgDown=function(){var t=-cc.winSize.height/2-2*cc.winSize.height,e=this.node.getComponent("BoxMgr").getIntervalY();this.nodeBg.y-e<=t&&(this.nodeBg.y+=2*cc.winSize.height,this.reloadBoxs()),this.nodeBg.runAction(cc.sequence(cc.moveBy(.2,0,-e),cc.callFunc(function(){})))},e.prototype.onTouchCallback=function(t){this.mIsPlaying&&(this.nodeRobot.getComponent("Robot").isJumping()||(this.bgDown(),this.mIsPlaying=!0,t.getLocation().x<cc.winSize.width/2?this.robotJumpLeft():this.robotJumpRight()))},e.prototype.onClick=function(){this.nodeEnd.active=!1,cc.director.loadScene("game")},__decorate([i(cc.Node)],e.prototype,"nodeBg",void 0),__decorate([i(cc.Node)],e.prototype,"nodeRobot",void 0),__decorate([i(cc.Node)],e.prototype,"nodeEnd",void 0),__decorate([i(cc.Label)],e.prototype,"txtPoints",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],Home:[function(t,e,o){"use strict";cc._RF.push(e,"ea1cfsbXudPJ4WX42MB9eZ6","Home"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},e.prototype.onClick=function(t,e){switch(e){case"start":cc.director.loadScene("game")}},__decorate([i(cc.Label)],e.prototype,"label",void 0),__decorate([i],e.prototype,"text",void 0),e=__decorate([r],e)}(cc.Component);o.default=s,cc._RF.pop()},{}],NodeMgr:[function(t,e,o){"use strict";cc._RF.push(e,"145c9r8knJFxITDJNV9ZU/n","NodeMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,r=n.ccclass,i=(n.property,function(){function t(){}return t.putBox=function(t){null==this.mBoxNodePool&&(this.mBoxNodePool=new cc.NodePool("boxs")),null!=t&&this.mBoxNodePool.put(t)},t.getBox=function(){if(null!=this.mBoxNodePool&&this.mBoxNodePool.size()>0){var t=this.mBoxNodePool.get();return t.stopAllActions(),t}return null},t.mBoxNodePool=null,t=__decorate([r],t)}());o.default=i,cc._RF.pop()},{}],Robot:[function(t,e,o){"use strict";cc._RF.push(e,"271bf5w5iNF2bd5zzPMVddO","Robot"),Object.defineProperty(o,"__esModule",{value:!0});var n,r=cc._decorator,i=r.ccclass,s=r.property;(function(t){t[t.Left=0]="Left",t[t.Right=1]="Right"})(n||(n={}));var c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spfLeft=null,e.spfRight=null,e.txtPoints=null,e.mPrevNode=null,e.mCurrNode=null,e.mNextNode=null,e.mOffset=cc.v2(11,120),e.mRobotFace=-1,e.mAddCallback=null,e.mFailedCallback=null,e.mJumping=!1,e.mPoints=0,e}return __extends(e,t),e.prototype.start=function(){this.node.zIndex=2e4,this.txtPoints.string=""+this.mPoints},e.prototype.turnLeft=function(){this.mRobotFace=n.Left,this.node.getComponent(cc.Sprite).spriteFrame=this.spfLeft},e.prototype.turnRight=function(){this.mRobotFace=n.Right,this.node.getComponent(cc.Sprite).spriteFrame=this.spfRight},e.prototype.setNext=function(t){this.mNextNode=t},e.prototype.setCurrent=function(t){this.mCurrNode=t,this.node.position=this.mCurrNode.position.add(this.mOffset)},e.prototype.getCurrent=function(){return this.mCurrNode},e.prototype.setAddCallback=function(t){this.mAddCallback=t},e.prototype.setFailedCallback=function(t){this.mFailedCallback=t},e.prototype.jump=function(){var t=this;if(null!=this.mNextNode){this.mJumping=!0;var e=this.node.position,o=this.mNextNode.position;if(o=o.add(this.mOffset),this.mRobotFace==n.Left&&o.x<e.x||this.mRobotFace==n.Right&&o.x>e.x)this.node.runAction(cc.sequence(cc.jumpTo(.2,o,30,1),cc.callFunc(function(){t.mPrevNode=t.mCurrNode,t.mCurrNode=t.mNextNode,t.mNextNode=t.mCurrNode.getComponent("Box").getNext(),t.mJumping=!1}),cc.callFunc(function(){null!=t.mPrevNode&&(t.mPrevNode.getComponent("Box").down(-t.getDownY(t.mPrevNode)),t.mPrevNode=null),null!=t.mAddCallback&&t.mAddCallback(),t.mPoints++,t.txtPoints.string=""+t.mPoints})));else{var r=e;o.x>e.x?r.x-=130:r.x+=130,r.y+=65,this.node.runAction(cc.sequence(cc.jumpTo(.2,r,30,1),cc.callFunc(function(){t.mJumping=!1,null!=t.mPrevNode&&(t.mPrevNode.getComponent("Box").down(-t.getDownY(t.mPrevNode)),t.mPrevNode=null),t.node.runAction(cc.sequence(cc.moveBy(.5,0,-t.getDownY(t.node)),cc.callFunc(function(){null!=t.mFailedCallback&&t.mFailedCallback()})))})))}}},e.prototype.getDownY=function(t){return t.parent.convertToWorldSpace(t.position).y+t.height},e.prototype.isJumping=function(){return this.mJumping},__decorate([s(cc.SpriteFrame)],e.prototype,"spfLeft",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"spfRight",void 0),__decorate([s(cc.Label)],e.prototype,"txtPoints",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],"use_v2.0.x_cc.Toggle_event":[function(t,e,o){"use strict";cc._RF.push(e,"552d4hdVtdBgK0orCrjpBDG","use_v2.0.x_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_check=!0),cc._RF.pop()},{}]},{},["use_v2.0.x_cc.Toggle_event","Box","BoxMgr","Game","Home","NodeMgr","Robot"]);