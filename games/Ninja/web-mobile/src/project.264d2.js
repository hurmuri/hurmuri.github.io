window.__require=function t(o,e,i){function c(r,s){if(!e[r]){if(!o[r]){var a=r.split("/");if(a=a[a.length-1],!o[a]){var h="function"==typeof __require&&__require;if(!s&&h)return h(a,!0);if(n)return n(a,!0);throw new Error("Cannot find module '"+r+"'")}r=a}var p=e[r]={exports:{}};o[r][0].call(p.exports,function(t){return c(o[r][1][t]||t)},p,p.exports,t,o,e,i)}return e[r].exports}for(var n="function"==typeof __require&&__require,r=0;r<i.length;r++)c(i[r]);return c}({contact:[function(t,o,e){"use strict";cc._RF.push(o,"fb3c4nS+IlHELBumInBV5sW","contact"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onDestroy:function(){},onBeginContact:function(t,o,e){0==o.tag&&0==e.tag&&this.contactFunction(o,e)},onEndContact:function(t,o,e){},onPreSolve:function(t,o,e){},onPostSolve:function(t,o,e){},contactFunction:function(t,o){this.callBack&&this.callBack(t,o)},contactCallBack:function(t){this.callBack=t}}),cc._RF.pop()},{}],gamePlay:[function(t,o,e){"use strict";cc._RF.push(o,"6b0b8BsEU1KibJroRak6OAX","gamePlay");cc.Class({extends:cc.Component,properties:{bgImg:cc.Node,tipsLayer:cc.Node,obsLayer:cc.Node,heroImg:cc.Node,heroBloodBar:cc.ProgressBar,scoreText:cc.Label,gameOverLayer:cc.Node,resultScoreText:cc.Label,obsCakePrefab:cc.Prefab,obsDartsPrefab:cc.Prefab,obsColumn0Prefab:cc.Prefab,obsColumn1Prefab:cc.Prefab,obsImgAtlas:cc.SpriteAtlas},onLoad:function(){this._winSize=cc.winSize,this._obsArrays=[],this._isStartGame=!1,this._isLeft=!0,this._jumpCount=0,this._heroBloodValue=5,this._curScore=0,cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,0),this.tipsLayer.active=!0,this.createFloor(),this.heroContact(),this.node.on(cc.Node.EventType.TOUCH_START,this.onEventStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onEventEnd,this)},createFloor:function(){this._wallArrays=[];for(var t=-this._winSize.height/2;t<=this._winSize.height/2+60;){var o=new cc.Node;o.parent=this.obsLayer,o.addComponent(cc.Sprite).spriteFrame=this.obsImgAtlas.getSpriteFrame("wall"),o.position=cc.v2(0,t),t+=60,this._wallArrays.push(o)}},createObs:function(t){var o=Math.floor(100*Math.random()),e=Math.floor(100*Math.random())%2;if(cc.log("obsType = ",o),o>=70&&o<80){var i=Math.floor(100*Math.random())%4,c=cc.instantiate(0==i?this.obsColumn0Prefab:this.obsColumn1Prefab);e?(c.position=cc.v2(0==i?-105:-65,t.position.y),c.scaleX=1):(c.position=cc.v2(0==i?105:65,t.position.y),c.scaleX=-1),c.parent=this.obsLayer,this._obsArrays.push(c)}else if(o>=80&&o<=95){var n=cc.instantiate(this.obsDartsPrefab);e?(n.position=cc.v2(-48,t.position.y),n.scaleX=1):(n.position=cc.v2(48,t.position.y),n.scaleX=-1),n.parent=this.obsLayer,n.runAction(cc.repeatForever(cc.rotateBy(1,360))),this._obsArrays.push(n)}else if(o>95){var r=cc.instantiate(this.obsCakePrefab);e?(r.position=cc.v2(-45,t.position.y),r.scaleY=1):(r.position=cc.v2(45,t.position.y),r.scaleY=-1),r.parent=this.obsLayer,this._obsArrays.push(r)}},floorAni:function(){for(var t=0;t<this._wallArrays.length;t++){var o=this._wallArrays[t];o.position.y<=-this._winSize.height/2-30&&(o.position=cc.v2(0,this._winSize.height/2+30),this.createObs(o),this._curScore+=1,this.updateScore()),o.position=cc.v2(0,o.position.y-5)}},obsAni:function(){this._obsArrays.length;for(var t=0;t<this._obsArrays.length;){var o=this._obsArrays[t];o.position.y<=-this._winSize.height/2-30?(o.removeFromParent(),this._obsArrays.splice(t,1)):(o.position=cc.v2(o.position.x,o.position.y-5),t++)}},heroContact:function(){var t=this;this.heroImg.getComponent("contact").contactCallBack(function(o,e){var i=o.node.group,c=e.node.group;if(("hero"==i&&"floor"==c||"floor"==i&&"hero"==c)&&t._jumpCount>0&&(t._jumpCount=0),"hero"==i&&"prop"==c||"prop"==i&&"hero"==c){var n=null;"prop"==i&&(n=o),"prop"==c&&(n=e),n.node.active=!1,t.updateBlood(1),t.playSound("sound/add_time")}if("hero"==i&&"darts"==c||"darts"==i&&"hero"==c){t.heroImg.opacity=255,t.heroImg.runAction(cc.blink(.3,2));var r=null;"darts"==i&&(r=o),"darts"==c&&(r=e),r.node.active=!1,t.updateBlood(-1),t.playSound("sound/darts")}("hero"==i&&"column"==c||"column"==i&&"hero"==c)&&(t.playSound("sound/die"),t.updateBlood(-5),t.gameOver()),t.heroImg.position.y=0})},onEventStart:function(t){1==this._isStartGame&&(t.getLocation().x<this._winSize.width/2?this._isLeft?this.heroJumpAni():this.setHeroDir(!0):this._isLeft?this.setHeroDir(!1):this.heroJumpAni())},onEventEnd:function(t){},tipsCallBack:function(t,o){this.playSound("sound/click",!1),this.tipsLayer.active=!1,this._isStartGame=!0,cc.director.getPhysicsManager().gravity=cc.v2(-320,0),this.heroImg.getComponent("spriteFrameAni").playAni("hero",12,.04,!0),this.setHeroDir(!0)},againCallBak:function(){this.playSound("sound/click",!1),cc.director.preloadScene("playScene",function(){cc.director.loadScene("playScene")})},exitCallBack:function(t,o){},setHeroDir:function(t){if(!(this._jumpCount>0)){this.playSound("sound/walk",!1),this._isLeft=t;t?(this.heroImg.position=cc.v2(-95,0),this.heroImg.scaleX=-.6,cc.director.getPhysicsManager().gravity=cc.v2(980,0)):(this.heroImg.position=cc.v2(95,0),this.heroImg.scaleX=.6,cc.director.getPhysicsManager().gravity=cc.v2(-980,0))}},heroJumpAni:function(){this._jumpCount<2&&(this.playSound("sound/walk",!1),this._jumpCount+=1,this._isLeft?this.heroImg.getComponent(cc.RigidBody).applyForceToCenter(cc.v2(-19e4,0)):this.heroImg.getComponent(cc.RigidBody).applyForceToCenter(cc.v2(19e4,0)))},updateBlood:function(t){this._heroBloodValue+=t,this._heroBloodValue>5&&(this._heroBloodValue=5),this._heroBloodValue<=0&&this.gameOver();var o=this._heroBloodValue/5;this.heroBloodBar.progress=o},updateScore:function(){this.scoreText.string=this._curScore+"m"},gameOver:function(){this._isStartGame=!1,this.heroImg.stopAllActions(),this.heroImg.opacity=255,this.gameOverLayer.active=!0,this.resultScoreText.string="\u606d\u559c\u4f60\u8dd1\u4e86"+this._curScore+"m"},setImgTexture:function(t,o){cc.loader.loadRes(t,cc.SpriteFrame,function(t,e){t?cc.error(t.message||t):o.getComponent(cc.Sprite).spriteFrame=e}.bind(this))},playSound:function(t,o){cc.loader.loadRes(t,cc.AudioClip,function(t,e){if(!t)cc.audioEngine.playEffect(e,o)})},update:function(t){1==this._isStartGame&&(this.floorAni(),this.obsAni())}}),cc._RF.pop()},{}],gameStart:[function(t,o,e){"use strict";cc._RF.push(o,"6d6c0t6SphFaozwN4k4obQI","gameStart"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.playMusic("sound/background",!0)},startBtnCallBack:function(t,o){this.playSound("sound/click",!1),cc.log("startBtnCallBack"),cc.director.preloadScene("playScene",function(){cc.director.loadScene("playScene")})},playSound:function(t,o){cc.loader.loadRes(t,cc.AudioClip,function(t,e){if(!t)cc.audioEngine.playEffect(e,o)})},playMusic:function(t,o){cc.loader.loadRes(t,cc.AudioClip,function(t,e){if(!t)cc.audioEngine.playMusic(e,o)})},update:function(t){}}),cc._RF.pop()},{}],spriteFrameAni:[function(t,o,e){"use strict";cc._RF.push(o,"7ad6aNHwyxDlb8CVtmbVfXV","spriteFrameAni"),cc.Class({extends:cc.Component,properties:{bigImg:cc.SpriteAtlas},onLoad:function(){},playAni:function(t,o,e,i){var c=this;this.stopAni(),this.node.getComponent(cc.Sprite).spriteFrame=this.bigImg.getSpriteFrame(t+0);for(var n=[],r=function(o){n.push(cc.delayTime(e)),n.push(cc.callFunc(function(){c.node.getComponent(cc.Sprite).spriteFrame=c.bigImg.getSpriteFrame(t+o)}))},s=0;s<o;s++)r(s);i?this.node.runAction(cc.repeatForever(cc.sequence(n))):this.node.runAction(cc.sequence(n))},stopAni:function(){this.node.stopAllActions()},onDestroy:function(){}}),cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(t,o,e){"use strict";cc._RF.push(o,"c4abaKY6wRPW709KOmvH9ES","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["contact","gamePlay","gameStart","spriteFrameAni","use_v2.1-2.2.1_cc.Toggle_event"]);