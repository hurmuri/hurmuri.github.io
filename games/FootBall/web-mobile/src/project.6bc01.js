window.__require=function e(t,a,c){function o(s,i){if(!a[s]){if(!t[s]){var r=s.split("/");if(r=r[r.length-1],!t[r]){var l="function"==typeof __require&&__require;if(!i&&l)return l(r,!0);if(n)return n(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var h=a[s]={exports:{}};t[s][0].call(h.exports,function(e){return o(t[s][1][e]||e)},h,h.exports,e,t,a,c)}return a[s].exports}for(var n="function"==typeof __require&&__require,s=0;s<c.length;s++)o(c[s]);return o}({SelectGame:[function(e,t,a){"use strict";cc._RF.push(t,"d3e08LisVFAv7mDb1zS7YUG","SelectGame"),cc.Class({extends:cc.Component,properties:{selectLayer:cc.Node,clickBtnPrefab:cc.Prefab},start:function(){for(var e=0;e<9;e++){var t=cc.instantiate(this.clickBtnPrefab);t.parent=this.selectLayer,t.getComponent("selectItem").setParameter(e+1)}},onReturnCallback:function(e,t){cc.director.preloadScene("gameStart",function(){cc.director.loadScene("gameStart")})}}),cc._RF.pop()},{}],StartGame:[function(e,t,a){"use strict";cc._RF.push(t,"5a204SAbq1HebW4ASGoK13q","StartGame"),window.gameTools=e("gameTools"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},start:function(){},startBtnCallBack:function(e,t){gameTools.playMusic("sound/bgm",!0),cc.director.preloadScene("gameSelect",function(){cc.director.loadScene("gameSelect")})}}),cc._RF.pop()},{gameTools:"gameTools"}],contact:[function(e,t,a){"use strict";cc._RF.push(t,"92b8d6w1a5JloyjfzSwWCKY","contact"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){},onDestroy:function(){},onBeginContact:function(e,t,a){0==t.tag&&0==a.tag&&this.contactFunction(t,a)},onEndContact:function(e,t,a){},onPreSolve:function(e,t,a){},onPostSolve:function(e,t,a){},contactFunction:function(e,t){this.callBack&&this.callBack(e,t)},contactCallBack:function(e){this.callBack=e}}),cc._RF.pop()},{}],gameEndLayer:[function(e,t,a){"use strict";cc._RF.push(t,"f90ffWr3wNAmqGuIgn3XmRs","gameEndLayer"),cc.Class({extends:cc.Component,properties:{getStarNode:{default:[],type:cc.Node},timeStarNode:{default:[],type:cc.Node},starNode:{default:[],type:cc.Node},totalLable:cc.Label,highLable:cc.Label,homeBtn:cc.Button,nextBtn:cc.Button,againBtn:cc.Button},start:function(){},homeBtnCallback:function(e,t){cc.director.preloadScene("gameStart",function(){cc.director.loadScene("gameStart")})},nextBtnCallback:function(e,t){this._scene.onNextGame()},againBtnCallback:function(e,t){this._scene.reSetGame()},setScene:function(e){this._scene=e},setEndData:function(e,t){for(var a=this,c=[],o=0;o<e;o++)c.push(this.getStarNode[o]);var n=0;n=3;for(var s=0;s<n;s++)c.push(this.timeStarNode[s]);var i=e;3==i&&n<3&&(i-=1);for(var r=0;r<i;r++)c.push(this.starNode[r]);for(var l=function(o){var s=.15*o;c[o].runAction(cc.sequence(cc.delayTime(s),cc.callFunc(function(){if(gameTools.setImgTexture("imageRes/star1",c[o]),gameTools.playSound("sound/starget"),o==c.length-1){var s=250*(e+n);a.totalLable.string="TOTAL:"+s;var r=parseInt(cc.sys.localStorage.getItem("highscore"+t))||0;a.highLable.string="HIGH SCORE:"+r,s>r&&(a.highLable.string="HIGH SCORE:"+s,cc.sys.localStorage.setItem("highscore"+t,s));var l=parseInt(cc.sys.localStorage.getItem("finishStageNum"))||0;t+1>l&&(parseInt(cc.sys.localStorage.setItem("finishStageNum",t+1)),t+1>gameTools.getAllStage()&&parseInt(cc.sys.localStorage.setItem("finishStageNum",gameTools.getAllStage())));var h=parseInt(cc.sys.localStorage.getItem("leveStarNum"+t))||0;i>h&&cc.sys.localStorage.setItem("leveStarNum"+t,i)}})))},h=0;h<c.length;h++)l(h)}}),cc._RF.pop()},{}],gameTools:[function(e,t,a){"use strict";cc._RF.push(t,"0743b0+xvNAG60L1XruW3jJ","gameTools");var c={getAllStage:function(){return 3},playSound:function(e,t){cc.loader.loadRes(e,cc.AudioClip,function(e,a){if(!e)cc.audioEngine.playEffect(a,t)})},playMusic:function(e,t){cc.loader.loadRes(e,cc.AudioClip,function(e,a){if(!e)cc.audioEngine.playMusic(a,t)})},setImgTexture:function(e,t){cc.loader.loadRes(e,cc.SpriteFrame,function(e,a){e?cc.error(e.message||e):t.getComponent(cc.Sprite).spriteFrame=a}.bind(this))}};t.exports=c,cc._RF.pop()},{}],playGame:[function(e,t,a){"use strict";cc._RF.push(t,"e6daf7nNt1A1L1CgUrT0elz","playGame"),cc.Class({extends:cc.Component,properties:{ballPrefab:cc.Prefab,imageBg:cc.Node,stageNode:{default:[],type:cc.Prefab},starNode:{default:[],type:cc.Node},levelLable:cc.Label,timeLable:cc.Label,gameEndLayer:cc.Prefab},onLoad:function(){var e=this;cc.director.getPhysicsManager().enabled=!0,cc.director.getPhysicsManager().gravity=cc.v2(0,-680),this._smallCircleNode=[];for(var t=0;t<20;t++){var a=new cc.Node;a.addComponent(cc.Sprite);gameTools.setImgTexture("imageRes/tttby_shoushi_yuandian",a),a.parent=this.imageBg,a.active=!1,a.scale=.6,a.zIndex=101,this._smallCircleNode[t]=a}this.stageNodeayer=cc.instantiate(this.stageNode[0]),this.stageNodeayer.parent=this.imageBg,this.ballNode=cc.instantiate(this.ballPrefab),this.ballNode.parent=this.stageNodeayer,this.ballNode.zIndex=100,this.ballNode.getComponent("contact").contactCallBack(function(t,a){var c=t.node.group,o=a.node.group;("ball"==c&&"star"==o||"star"==c&&"ball"==o)&&("star"==c?t.node.active=!1:a.node.active=!1,gameTools.playSound("sound/get_item"),e.starNode[e._getStarCount].active=!0,e._getStarCount=e._getStarCount+1),("ball"==c&&"inball"==o||"inball"==c&&"ball"==o)&&("inball"==c?t.node.active=!1:a.node.active=!1,gameTools.playSound("sound/get_item"),e.showGameEndLayer(),e.stopTimeUpdate(),e.ballNode.active=!1,e.ballNode.active=!0)}),this.node.on(cc.Node.EventType.TOUCH_START,this.onEventStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this.onEventMove,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this.onEventCancel,this),this.node.on(cc.Node.EventType.TOUCH_END,this.onEventEnd,this),this._selectStage=parseInt(cc.sys.localStorage.getItem("selectStage"))||1,this.reSetGame()},start:function(){},reSetGame:function(){this.levelLable.string="LEVEL:"+this._selectStage,this._useTime=0,this.timeLable.string="TIME:"+this._useTime;for(var e=0;e<this.starNode.length;e++)this.starNode[e].active=!1;for(var t=1;t<this._smallCircleNode.length;t++)this._smallCircleNode[t].active=!1;this._getStarCount=0,this.ballNode.removeFromParent(),this.stageNodeayer&&(this.stageNodeayer.removeFromParent(),this.stageNodeayer=null),this.stageNodeayer=cc.instantiate(this.stageNode[this._selectStage-1]),this.stageNodeayer.parent=this.imageBg;var a=this.stageNodeayer.getComponent("stageGame");a.setBallStartPos(this.ballNode),a.showStar(),a.showInBallNode(),this.ballNode.parent=this.stageNodeayer,this.ballNode.active=!1,this.ballNode.active=!0,this._gameEndLayer&&(this._gameEndLayer.removeFromParent(),this._gameEndLayer=null),this.startTimeUpdate()},onEventStart:function(e){this._canShooting=!1;var t=e.getLocation(),a=this.ballNode.position;a=this.ballNode.parent.convertToWorldSpaceAR(a),Math.abs(t.x-a.x)<30&&Math.abs(t.y-a.y)<30&&(this._canShooting=!0)},onEventMove:function(e){if(this._canShooting){var t=e.getLocation(),a=this.ballNode.position;a=this.ballNode.parent.convertToWorldSpaceAR(a),this.velocity=this.getVelocityByPos(t,a);for(var c=2/3*Math.PI*Math.pow(.3,3)*680,o=this.getAngleByPos(a,t),n=1;n<this._smallCircleNode.length;n++){var s=.35*n,i=Math.sqrt(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2)),r=i*Math.cos(o*Math.PI/180)*s,l=i*Math.sin(o*Math.PI/180)*s-.5*c*Math.pow(s,2),h=cc.v2(a.x+r,a.y+l),g=this.imageBg.convertToNodeSpaceAR(h);this._smallCircleNode[n].position=g,this._smallCircleNode[n].active=!0}}},onEventEnd:function(e){for(var t=1;t<this._smallCircleNode.length;t++)this._smallCircleNode[t].active=!1;this._canShooting&&this.ballNode.getComponent(cc.RigidBody).applyForceToCenter(cc.v2(340*this.velocity.x,340*this.velocity.y))},onEventCancel:function(e){for(var t=1;t<this._smallCircleNode.length;t++)this._smallCircleNode[t].active=!1},getAngleByPos:function(e,t){var a=0;return a=180*Math.atan(Math.abs(t.x-e.x)/Math.abs(t.y-e.y))/3.14,a=e.x<=t.x&&e.y<=t.y?90-a:e.x<=t.x&&e.y>=t.y?-(90-a):e.x>=t.x&&e.y>=t.y?90-a+180:-(90-a+180)},getVelocityByPos:function(e,t){cc.v2(0,0);var a=Math.abs(Math.abs(e.x)-Math.abs(t.x)),c=Math.abs(Math.abs(e.y)-Math.abs(t.y));return e.x<t.x&&(a=-a),e.y<t.y&&(c=-c),cc.v2(a,c)},showGameEndLayer:function(){this._gameEndLayer=cc.instantiate(this.gameEndLayer);var e=this._gameEndLayer.getComponent("gameEndLayer");this._gameEndLayer.parent=this.node,this._gameEndLayer.ZIndex=100,e.setScene(this),e.setEndData(this._getStarCount,this._selectStage)},againBtnCallback:function(e,t){this.reSetGame()},returnBtnCalback:function(e,t){cc.director.preloadScene("gameSelect",function(){cc.director.loadScene("gameSelect")})},onNextGame:function(){this._selectStage=this._selectStage+1,this._selectStage>gameTools.getAllStage()&&(this._selectStage=gameTools.getAllStage()),this.reSetGame()},startTimeUpdate:function(){this.stopTimeUpdate(),this._timeFun=function(){this._useTime=this._useTime+1,this.timeLable.string="TIME:"+this._useTime},this.schedule(this._timeFun,1)},stopTimeUpdate:function(){this._timeFun&&this.unschedule(this._timeFun)}}),cc._RF.pop()},{}],selectItem:[function(e,t,a){"use strict";cc._RF.push(t,"4282eDdIUVEqqNt4YAshf2s","selectItem"),cc.Class({extends:cc.Component,properties:{clickBtn:cc.Button,numText:cc.Label,starSprite:{default:[],type:cc.Sprite},suoSprite:cc.Sprite,stageImgAtlas:cc.SpriteAtlas},start:function(){},setParameter:function(e){this._leveNum=e,this.numText.string=e;for(var t=parseInt(cc.sys.localStorage.getItem("leveStarNum"+e))||0,a=0;a<3;a++)this.starSprite[a].spriteFrame=a+1<=t?this.stageImgAtlas.getSpriteFrame("stzq_shx1"):this.stageImgAtlas.getSpriteFrame("stzq_shx2");var c=parseInt(cc.sys.localStorage.getItem("finishStageNum"))||1;this.suoSprite.node.active=!(e<=c)},onBtnCallback:function(e,t){cc.sys.localStorage.setItem("selectStage",this._leveNum),cc.director.preloadScene("gamePlay",function(){cc.director.loadScene("gamePlay")})}}),cc._RF.pop()},{}],stageGame:[function(e,t,a){"use strict";cc._RF.push(t,"35ea5n0l3ZHta6lEinlxrhc","stageGame"),cc.Class({extends:cc.Component,properties:{boxNode:cc.Node,ballPosNode:cc.Node,inBallNode:cc.Node,starNode:{default:[],type:cc.Node}},start:function(){this.boxNode.zIndex=101},setBallStartPos:function(e){e.position=this.ballPosNode.position},showStar:function(){for(var e=0;e<this.starNode.length;e++)this.starNode[e].active=!0},showInBallNode:function(){this.inBallNode.active=!0}}),cc._RF.pop()},{}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,t,a){"use strict";cc._RF.push(t,"6b7edfHYBZE4ZJ8S43s4YJy","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["SelectGame","StartGame","contact","gameEndLayer","gameTools","playGame","selectItem","stageGame","use_v2.1-2.2.1_cc.Toggle_event"]);